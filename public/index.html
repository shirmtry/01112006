<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2k6 mãi đỉnh</title>
    <link rel="stylesheet" href="ok1.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins:700,600,400&display=swap" rel="stylesheet">
    <style>
        .selected { background: #ffd700; }
        .tx-quick-btn { margin: 2px; }
        .dice3d-3d { width: 40px; height: 40px; perspective: 400px; display: inline-block; }
        .face { position: absolute; }
        .result-ball, .tx-result-ball { display:inline-block;margin:1px;padding:2px 7px;border-radius:50%;font-weight:bold; }
        .tai-ball, .tx-result-ball.tai { background:#ffd; color:#c00;}
        .xiu-ball, .tx-result-ball.xiu { background:#ddf; color:#04a;}
        body { font-family: 'Poppins', Arial,sans-serif; background: #f6f7fb; color: #222; }
        #mainContent { max-width: 900px; margin: 0 auto; background: #fff; padding: 30px 20px 32px 20px; border-radius: 12px; box-shadow: 0 2px 10px #0001; }
        h2, h3, h4 { margin-top: 0; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 6px 8px; }
        th { background: #f7f7f7; }
        #loginForm, #registerForm { max-width: 350px; margin: 50px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 10px #0002; padding: 24px; }
        input { padding: 7px; margin: 5px 0 12px 0; border: 1px solid #ccc; border-radius: 4px; width: 90%; }
        button { padding: 7px 18px; border-radius: 6px; border: none; background: #3b82f6; color: #fff; font-weight: 600; margin: 3px 2px; cursor: pointer; }
        button:disabled { background: #bbb; cursor: not-allowed; }
        .tx-quick-btn.selected { background: #22d3ee; color: #fff; border:2px solid #155e75; }
        #betStatus { font-weight: bold; margin: 10px 0 8px 0; color: #0a7;}
        .captcha-inputcode input { width: 60px; margin-right: 10px; }
        .captcha-img { display: inline-block; min-width: 60px; min-height: 28px; font-weight: bold; font-size: 1.1rem; background: #eee; text-align: center; vertical-align: middle; line-height: 28px; user-select: none; cursor: pointer; border-radius: 5px; padding: 0 8px; }
        .login-form, .register-form { width: 100%; }
        .main-content-flex { display: flex; flex-direction: column; }
        .main-flex-wrap { display: flex; flex-wrap: wrap; gap: 32px; }
        .main-flex-left { flex: 1 1 380px; min-width: 320px; }
        .main-flex-right { flex: 1 1 320px; min-width: 280px; }
        @media (max-width: 900px) {
            .main-flex-wrap { flex-direction: column; }
            #mainContent { max-width: 100%; }
        }
    </style>
</head>
<body>
    <div class="auth-wrapper" id="authWrapper">
        <div class="login-form" id="loginForm">
            <h2>Đăng nhập</h2>
            <div class="form-group">
                <label for="username">Tên đăng nhập:</label>
                <input type="text" id="username" placeholder="Nhập tên đăng nhập" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="password">Mật khẩu:</label>
                <input type="password" id="password" placeholder="Nhập mật khẩu" autocomplete="current-password">
            </div>
            <div class="form-group captcha-row">
                <label class="captcha-label">Mã xác nhận:</label>
                <div class="captcha-inputcode">
                    <input type="text" id="captcha" placeholder="Nhập mã">
                    <span class="captcha-img" id="captchaDisplay" title="Bấm để tạo mã mới" onclick="generateCaptcha()"></span>
                </div>
            </div>
            <div class="action-row">
                <button type="button" class="login-btn" id="loginBtn">Đăng nhập</button>
                <button type="button" class="register-btn" id="showRegisterLink">Đăng ký</button>
            </div>
        </div>
        <div class="register-form" id="registerForm" style="display:none;">
            <h2>Đăng ký</h2>
            <div class="form-group">
                <label for="reg_username">Tên đăng nhập:</label>
                <input type="text" id="reg_username" placeholder="Tên đăng nhập mới" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="reg_password">Mật khẩu:</label>
                <input type="password" id="reg_password" placeholder="Mật khẩu" autocomplete="new-password">
            </div>
            <div class="form-group">
                <label for="reg_password2">Nhập lại mật khẩu:</label>
                <input type="password" id="reg_password2" placeholder="Nhập lại mật khẩu" autocomplete="new-password">
            </div>
            <div class="form-group captcha-row">
                <label class="captcha-label">Mã xác nhận:</label>
                <div class="captcha-inputcode">
                    <input type="text" id="reg_captcha" placeholder="Nhập mã">
                    <span class="captcha-img" id="reg_captchaDisplay" title="Bấm để tạo mã mới" onclick="generateCaptcha('reg_')"></span>
                </div>
            </div>
            <div class="action-row">
                <button type="button" class="register-btn" id="registerBtn">Đăng ký</button>
                <button type="button" class="login-btn" id="showLoginLink">Đăng nhập</button>
            </div>
        </div>
    </div>
    <div id="mainContent" style="display:none;">
        <div style="text-align:right;">
            <button id="logoutBtn">Đăng xuất</button>
        </div>
        <h3>Xin chào, <span id="userNameDisplay"></span> | Số dư: <span id="userBalance">0</span>đ</h3>
        <div class="main-flex-wrap">
            <div class="main-flex-left">
                <div id="tx-main-container">
                    <div style="margin-bottom:12px;">
                        <b>Phiên:</b> <span id="tx-round-id"></span> | <b>Thời gian:</b> <span id="tx-timer"></span>s
                    </div>
                    <div style="margin-bottom:12px;">
                        <span id="tx-tai-total">0</span> <b>TÀI</b>
                        &nbsp; - &nbsp;
                        <span id="tx-xiu-total">0</span> <b>XỈU</b>
                    </div>
                    <div style="margin-bottom:19px;">
                        <div id="dice3d-1"></div>
                        <div id="dice3d-2"></div>
                        <div id="dice3d-3"></div>
                    </div>
                    <div id="betStatus"></div>
                    <div style="margin-bottom:10px;">
                        <button id="tx-tai-select" class="selected">TÀI</button>
                        <button id="tx-xiu-select">XỈU</button>
                    </div>
                    <div style="margin-bottom:11px;">
                        <button class="tx-quick-btn" data-amount="1000">1K</button>
                        <button class="tx-quick-btn" data-amount="10000">10K</button>
                        <button class="tx-quick-btn" data-amount="100000">100K</button>
                        <button class="tx-quick-btn" data-amount="500000">500K</button>
                        <button class="tx-quick-btn" data-amount="5000000">5M</button>
                        <button class="tx-quick-btn" data-amount="10000000">10M</button>
                        <button class="tx-quick-btn" data-amount="50000000">50M</button>
                    </div>
                    <button id="tx-bet-btn">ĐẶT CƯỢC</button>
                    <div id="tx-result-list" style="margin-top:15px;"></div>
                </div>
            </div>
            <div class="main-flex-right">
                <div class="user-history-section">
                    <h3>Lịch sử Nạp/Rút của bạn</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Thời gian</th>
                                <th>Loại</th>
                                <th>Số tiền</th>
                                <th>Mã giao dịch</th>
                            </tr>
                        </thead>
                        <tbody id="userHistoryTableBody">
                            <tr><td colspan="4">Chưa có dữ liệu</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="user-stats-section">
                    <h3>Lịch sử cược của bạn</h3>
                    <table id="userStatsTable">
                        <thead>
                            <tr>
                                <th>Thời gian</th>
                                <th>Cược</th>
                                <th>Kết quả</th>
                                <th>Tổng</th>
                                <th>Thắng/Thua</th>
                            </tr>
                        </thead>
                        <tbody><tr><td colspan="5">Chưa có dữ liệu</td></tr></tbody>
                    </table>
                </div>
                <div class="multi-bets-section">
                    <h3>Lịch sử đặt cược theo phiên (toàn bộ người chơi)</h3>
                    <table id="multiUserBetsTable" class="bets-history-table">
                        <thead>
                            <tr>
                                <th>Phiên</th>
                                <th>Người chơi</th>
                                <th>Cược</th>
                                <th>Số tiền</th>
                                <th>Kết quả</th>
                                <th>Thời gian</th>
                            </tr>
                        </thead>
                        <tbody><tr><td colspan="6">Chưa có dữ liệu</td></tr></tbody>
                    </table>
                </div>
                <div id="adminPanel" style="display:none;">
                    <h3>Bảng điều khiển Admin</h3>
                    <h4>Yêu cầu nạp/rút chờ xác nhận:</h4>
                    <table id="adminRequestsTable">
                        <thead>
                            <tr>
                                <th>Thời gian</th><th>User</th><th>Loại</th><th>Số tiền</th><th>Mã</th><th>Trạng thái</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <h4>Lịch sử cược toàn hệ thống</h4>
                    <table id="adminBetsTable">
                        <thead>
                            <tr>
                                <th>User</th><th>Thời gian</th><th>Phiên</th><th>Cược</th><th>Số tiền</th><th>Tổng</th><th>KQ</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Popup Nạp tiền -->
    <div id="depositPage" class="bank-page" style="display:none;">
        <form class="bank-form-ct" autocomplete="off" onsubmit="return false;">
            <button type="button" class="bank-exit-btn" id="depositPageCloseBtn">&times;</button>
            <h3>Nạp tiền vào game</h3>
            <div class="deposit-admin-info">
                <div><b>Số tài khoản admin:</b> <span id="adminBankNumber">123456789</span></div>
                <div><b>Chủ tài khoản:</b> <span id="adminBankHolder">Nguyễn Văn Admin</span></div>
                <div><b>Ngân hàng:</b> <span id="adminBankName">MB Bank</span></div>
                <div style="color:#fff;font-size:14px;margin-top:7px;">* Chuyển đúng số tiền và ghi rõ mã giao dịch bên dưới vào nội dung chuyển khoản!</div>
            </div>
            <label for="depositPageAmount">Số tiền nạp:</label>
            <input type="number" id="depositPageAmount" autocomplete="off" placeholder="Nhập số tiền" min="1000" step="1000">
            <div class="bank-form-btnrow deposit-code-row">
                <button type="button" id="depositPageGenCodeBtn" disabled>Tạo mã chuyển khoản</button>
                <span class="bank-code-txt" id="depositPageCodeTxt"></span>
            </div>
            <div class="bank-form-btnrow">
                <button type="button" id="depositPageSubmitBtn" disabled>Xác nhận đã chuyển khoản</button>
            </div>
        </form>
    </div>
    <!-- Popup Rút tiền -->
    <div id="withdrawPage" class="bank-page" style="display:none;">
        <form class="bank-form-ct" autocomplete="off" onsubmit="return false;">
            <button type="button" class="bank-exit-btn" id="withdrawPageCloseBtn">&times;</button>
            <h3>Rút tiền khỏi game</h3>
            <label for="withdrawPageBank">Ngân hàng:</label>
            <input type="text" id="withdrawPageBank" autocomplete="off" placeholder="Tên ngân hàng">
            <label for="withdrawPageAccount">Số tài khoản:</label>
            <input type="text" id="withdrawPageAccount" autocomplete="off" placeholder="Số tài khoản">
            <label for="withdrawPageHolder">Chủ tài khoản:</label>
            <input type="text" id="withdrawPageHolder" autocomplete="off" placeholder="Chủ tài khoản">
            <label for="withdrawPageAmount">Số tiền rút:</label>
            <input type="number" id="withdrawPageAmount" autocomplete="off" placeholder="Số tiền muốn rút" min="1000" step="1000">
            <div class="bank-form-btnrow">
                <button type="button" id="withdrawPageSubmitBtn" disabled>Gửi yêu cầu rút</button>
            </div>
        </form>
    </div>
    <!-- Popup Lịch sử kết quả -->
    <div id="resultHistoryPage" style="display:none;position:fixed;z-index:1001;left:0;top:0;width:100vw;height:100vh;align-items:center;justify-content:center;">
        <div id="resultHistoryPageContent" style="position:relative"></div>
        <button class="result-history-close-btn" id="resultHistoryPageCloseBtn" style="position:absolute;top:18px;right:28px;font-size:2rem;background:none;border:none;color:#FFD700;cursor:pointer;">×</button>
    </div>
    <script src="main.js"></script>
</body>
</html>
